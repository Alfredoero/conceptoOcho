

{% load static %}
{% load bootstrap %}
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title></title>
	<link rel="stylesheet" href="">
	<link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
	<script src="{% static 'js/jquery.min.js' %}"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"></script>
	<script type="text/javascript" src="{% static 'js/bootstrap.min.js' %}"></script>
	<script type="text/javascript" src="{% static 'js/main.js' %}"></script>
</head>
<body>

<div class="container">
	<div class="row">
		<div class="col-12">			
			<div id="results">
				<h1>Custom Search <span class="loading"><img src="{% static 'assets/Magnify.gif' %}" alt=""></span></h1>
				<div>					
					<form action="{% url 'check' %}" method="post">
					    {% csrf_token %}
					    {{ form|bootstrap }}
					    <input type="hidden" name="page" value="{{ page }}">
					    <input type="submit" value="Submit" />
					</form>
				</div>				
			</div>			
		</div>
	</div>
	{% if noitems %}
	<div class="row">
		<div class="col">
			<h3>No results for this search</h3>
		</div>
	</div>
	{% endif %}
	{% if limitreached %}
	<div class="row">
		<div class="col">
			<h3>{{ limitreached }}</h3>
		</div>
	</div>
	{% endif %}
	
</div>
<script type="text/javascript">
	$(document).ready(function(){
		$(".loading").hide();
	 	$("#id_username").change(function () {
      		var username = $(this).val();

      		$.ajax({
        		url: '/ajax/validate_username/',
        		data: {
          			'username': username
        		},
        		dataType: 'json',
        		success: function (data) {
		          	if (data.is_taken) {
		            	alert("A user with this username already exists.");
		          	}
        		}
      		});
    	});
	});
	
</script>
</body>
</html>
